package apis;

import java.io.File;
import java.io.IOException;

import org.codehaus.jackson.JsonGenerationException;
import org.codehaus.jackson.map.JsonMappingException;
import org.codehaus.jackson.map.ObjectMapper;
import org.junit.Assert;

import POJO.CreateEmployee;
import POJO.CreateEmployeeSerialize;
import io.restassured.RestAssured;
import io.restassured.response.Response;
import util.Config;

public class TestAutomationLogic {
	String baseUrl;
	Config conf=new Config();
	//CreateEmployeeSerialize creEmpSerialise=new CreateEmployeeSerialize();
	CreateEmployee crea=new CreateEmployee();
	ObjectMapper objMapper = new ObjectMapper();
	
	public String url() {
		baseUrl = conf.retrievebaseUrl();
		return baseUrl;

	}

	public Response sendRequest(String api, String method) throws Exception {
		if(method.equalsIgnoreCase("GET"))
			return RestAssured.when().get(baseUrl.concat(api));
		else
		{
			objMapper.writeValue(new File("src/main/resources/Request/CreateEmployee.json"),crea);
			//String createEmpAsString = objMapper.writeValueAsString(crea);
			return RestAssured.given().log().all().body(crea).when().post(baseUrl.concat(api));
		}
	}

	public void validateResponse(int statusCode, Response response) {
		System.out.println(response.getStatusCode());
		Assert.assertEquals(statusCode,response.getStatusCode());
		
	}
	


}
